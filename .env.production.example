# ===========================================
# 生产环境配置
# ===========================================
# 复制此文件为 .env.production 并填写实际值
# 同时用于 docker-compose.production.yml 和 drizzle 数据库迁移

# ===========================================
# 数据库 (PostgreSQL + pgvector)
# ===========================================

# docker-compose 内部使用
POSTGRES_PASSWORD=your-secure-postgres-password

# drizzle 迁移使用（外部连接）
# 本地运行 drizzle 时使用此地址连接到 docker 内的数据库
DATABASE_URL=postgres://postgres:your-secure-postgres-password@localhost:5432/allinai

# ===========================================
# JWT 认证
# ===========================================

JWT_SECRET=your-super-secret-jwt-key-here

# ===========================================
# Redis 缓存 (@qiyu-allinai/cache)
# ===========================================

# docker-compose 内部使用 redis://redis:6379
# 本地开发使用 redis://localhost:6379
REDIS_URL=redis://redis:6379

# ===========================================
# MinIO/S3 存储 (@qiyu-allinai/storage)
# ===========================================

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=your-secure-minio-password

# S3 客户端配置（docker-compose 内部）
S3_ENDPOINT=http://minio:9000
S3_REGION=us-east-1
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=your-secure-minio-password
S3_BUCKET=knowledge

# ===========================================
# 域名配置（已在 docker-compose.production.yml 中硬编码）
# ===========================================

# API: https://api.qiyuai.windshage.cn
# 前端: https://qiyuai.windshage.cn
# 存储: https://storage.windshage.cn

# ===========================================
# 使用说明
# ===========================================

# 1. 复制此文件: cp .env.production.example .env.production
# 2. 修改密码和密钥
# 3. 启动服务: docker compose -f docker-compose.production.yml --env-file .env.production up -d
# 4. 运行数据库迁移: DATABASE_URL=xxx bun run db:migrate
